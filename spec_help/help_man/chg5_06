.TH "changes" "spec 5.06 Release Notes" "08/01/12" "chg5_06.rst 6.1  08/01/12 CSS"
.ds HF R
.na
.hy 0
.SH NAME
changes \- highlights of modifications for \fBspec\fP release 5.06
.\" spec reStructuredText documentation
.
\fP
.PP
.\" @(#)chg5_06.rst      6.1  08/01/12  CSS
.
.\" Copyright (c) 2006,2010,2012 Certified Scientific Software
.
.\" 
.
.\" versioninfo: "changes" "**spec** 5.06 Release Notes" "08/01/12" "chg5_06.rst 6.1  08/01/12 CSS"
.
.SH "September 5, 2006 \- RELEASE 5.06.06\-10"
.rs
.SH "Updated Support for Delta\-Tau Controllers"
.sp
The existing support for the Delta\-Tau PMAC motor controller on an ISA
bus has been updated for PMAC2 controllers over socket (Ethernet)
interfaces.
.SH "Open\-Loop Mode Fix for New Focus 8750/53"
.sp
A problem with position discrepancy messages appearing
after aborting a move when using
the New Focus 8750/53 controllers with open\-loop motors has been fixed.
The problem did not appear with closed\-loop motors.
.SH "August 28, 2006 \- RELEASE 5.06.06\-9"
.rs
.SH "Home Search For New Focus 8750/53 Updated"
.sp
The home search feature for the New Focus model 8750/53
has been updated to implement the
\fBFIN\fP,
\fBRIN\fP,
\fBFLI\fP
and
\fBRLI\fP
commands included with the controller version 1.5.4 firmware.
The first two search for the index mark on actuators so equipped in the
forward and reverse directions.
The second two search for the limit switches.
.SH "Fix For PI E710 Motor Controller"
.sp
An old bug in the code for the Physik Instrumente E710 where
the configuration choice of serial vs. GPIB was not always correctly
detected has been fixed.
.SH "August 17, 2006 \- RELEASE 5.06.06\-8"
.rs
.SH "Additional Updates For AI Solutions DAQ Modules"
.sp
Bugs in the new code for the AI Solutions DAQ modules (formerly KISIM),
which could lead to segmentation faults when switching the configuration
between 1D and 2D mode in the configuration file
or switching out of emulation mode via
\fBmca_par()\fP,
have been fixed.
.SH "August 4, 2006 \- RELEASE 5.06.06\-7"
.rs
.SH "Support For Tsuji Model SPM8C\-01 Motor Controller"
.sp
This \fBspec\fP release includes support for the Tsuji Model SPM8C\-01
motor controller over a socket interface.
.SH "Support For Huber 9300 Motor Controller"
.sp
This \fBspec\fP release has preliminary support for the Huber 9300 motor
controller over serial and socket interfaces.
.SH "Fixes For Amptek Pocket MCA"
.sp
A bug in the code for the Amptek
\fBPocket\fP
MCA 8000/8000A that prevented reading back the correct data from other than
group zero has been fixed.
Also, a bug where the value returned by the
\fBmca_par()\fP
\fB"battery_type"\fP
argument was incorrect has been fixed.
.SH "Fix For ESRF/TACO Serial Device Timeouts"
.sp
A bug, where the RPC timeouts for connections to the ESRF/TACO serial
device server were set to 1000 times the requested value (usually
2000 seconds
instead of 2 seconds), has been fixed.
.SH "July 25, 2006 \- RELEASE 5.06.06\-6"
.rs
.SH "More Updates For AI Solutions DAQ Modules"
.sp
A bug in the new code for the AI Solutions DAQ modules (formerly KISIM),
which prevented setting the
\fB"offset_x"\fP
parameter in MCA mode with the
\fBmca_par()\fP
function, has been fixed.
In addition, the internal clock parameter is now reprogrammed,
if necessary, for time presets larger than approximately
4.7 hours.
Also, when counting to fixed count presets or with no presets,
\fBspec\fP will keep track of overflows in the elapsed\-time register
by using the computer\(aqs system clock, thus making the returned
elapsed\-time value
correct for indefinitely long count times.
.SH "Fix For Mac Science (now Bruker) MXC Instrument"
.sp
A bug (introduced three years ago in \fBspec\fP release 5.02.04\-1),
which broke control
of the
\fBrslit\fP
motor for the then Mac Science, now Bruker, MXC controller, has been fixed.
.SH "July 13, 2006 \- RELEASE 5.06.06\-5"
.rs
.SH "Fix For \fBsleep()\fP"
.sp
A bug that has been present for at least several years, where
a call to the built\-in
\fBsleep()\fP
function with an argument between \-1 and zero would cause \fBspec\fP
to become stuck, has been fixed.
.SH "Fix For \fB_plotconfig()\fP Macro"
.sp
An old bug in the internal
\fB_plotconfig()\fP
macro, which resulted in an
\fB"Array access SCAN_D[...][] is out of bounds"\fP
error message on start up or with the
\fBplotselect\fP
macro, has been fixed.
The error would occur if the scaler channels were rearranged in the
\fBconfig\fP
file such that an existing scaler\(aqs number (as returned by the
\fBcnt_num()\fP
function)
became greater than or equal to the value of
the global variable
\fBPLOT_CNTRS_MAX\fP
(default value of 10).
The previous work around for this bug of increasing the value of
\fBPLOT_CNTRS_MAX\fP
is no longer necessary.
.SH "Updated Code For AI Solutions DAQ Modules (Formerly KISIM)"
.sp
The support for the
HANARO KISIM USB modules has been rewritten for redesigned
modules, now produced by the Korean company, AI Solutions.
See the updated
\fI\%kisim\fP or
\fI\%aisolutions\fP help file for information on the new support.
.SH "July 12, 2006 \- RELEASE 5.06.06\-4"
.rs
.SH "Fix For \fBconfig\fP Issues When Changing Limits"
.sp
A rare problem, where motor limits would revert to their prior values
when reentering \fBspec\fP after using the
\fBconfig\fP
macro and configuration editor to change them, has been fixed.
The problem only occurred when motor position discrepancies
were resolved (either silently or with user intervention)
in favor of the hardware causing the
\fBsettings\fP
file to be updated during the built\-in motor synchronization call
that occurs just before possibly modified
\fBconfig\fP
and
\fBsettings\fP
files are reread.
.SH "Fix For OMS MAXv Controller When Moving Off Limits"
.sp
A timing problem with the new Oregon Micro Systems MAXv VME
motor controller firmware that sometimes made it impossible for \fBspec\fP
to move a motor off a limit
switch has been worked around.
.SH "Fix For Ortec MCS PCI Initialization"
.sp
A problem with \fBspec\fP\(aqs presence test and initialization of the Ortec
MCS PCI multi\-channel analyzer hardware that could occur if the board
was actively acquiring during \fBspec\fP\(aqs hardware configuration
procedure has been fixed
by making sure acquisition is off before testing the board\(aqs memory.
.SH "July 10, 2006 \- RELEASE 5.06.06\-3"
.rs
.SH "Fixed the Updated Support For EPICS Serial Record"
.sp
The updated support for the EPICS serial record that was included
in release 5.06.06\-1 had many problems which should now be fixed.
.SH "July 5, 2006 \- RELEASE 5.06.06\-2"
.rs
.SH "Newport NSC200 Support Updated"
.sp
The preliminary support for the Newport NSC200 motor controller
has been updated to fix a few problems.
.SH "June 30, 2006 \- RELEASE 5.06.06\-1"
.rs
.SH "Updated Support For EPICS Serial Record"
.sp
This \fBspec\fP release includes updated support for the EPICS serial record.
In particular, the new
\fBasyn\fP
record is supported.
Support for the older
\fBHideos\fP\-based
generic serial record is still included, and many
bugs with the older support have been fixed.
\fBspec\fP automatically sorts out which serial record is being used.
.SH "Fix For Server Motor and Counter Properties"
.sp
An old coding bug that may have caused generally insignificant
problems with the \fBspec\fP server when motor or counter properties were
received from a client, with the most noticeable being incorrect
command serial numbers, has been fixed.
.SH "June 2, 2006 \- RELEASE 5.06.05\-11"
.rs
.SH "Support For Inel PEM Motor Controller"
.sp
This \fBspec\fP release supports the Inel PEM motor controller over a
serial interface.
.SH "Insure User\-Units Mode Is Off For OMS Controllers"
.sp
\fBspec\fP will now send the
\fB"UF"\fP
(user off) command to each axis of an OMS motor controller
during hardware configuration
to make sure user units
are off to accommodate at least one site that switches
control between \fBspec\fP and software
that turns user\-units mode on.
.SH "May 12, 2006 \- RELEASE 5.06.05\-10"
.rs
.SH "Initial Support For Newport XPS Motor Controller"
.sp
This \fBspec\fP release contains initial support for Newport\(aqs XPS motor controller.
This motor controller communicates exclusively via sockets and contains its
own computer and operating system.
Motor parameters must be configured by downloading and uploading the XPS
configuration files by ftp.
\fBspec\fP mnemonics must match the XPS motor names in the XPS
\fBsystem.ini\fP
file.
\fBspec\fP will send slew rate and acceleration
parameters, as set in \fBspec\fP\(aqs
\fBconfig\fP
file, but those parameters will only be
accepted by the XPS if the values are not greater
than the maximum values set in the XPS
\fBstages.ini\fP
file.
Although the value of \fBspec\fP\(aqs steps\-per\-degree parameter is
ignored for calculating positions for these motors, the value is used
in \fBspec\fP\(aqs code for rounding motor positions to their intrinsic resolution.
Thus, set the parameter to a value the same order of magnitude as the
value in the
\fBstages.ini\fP
file.
(Unfortunately, there is no command in the XPS protocol to retrieve the value,
other than retrieving and parsing the configuration files, which is beyond
\fBspec\fP\(aqs scope.)
.SH "May 3, 2006 \- RELEASE 5.06.05\-9"
.rs
.SH "Fixes For Compumotor 6K Motor Controller"
.sp
A couple of problems with the support code for the
Compumotor 6K motor controller have been fixed.
Unnecessary
\fBAXSDEF\fP
calls, which could lead to lost positions, are now avoided for all
models, including those with eight motors.
A problem, where the final position of a motor was
sometimes not read
at the end of a move when multiple motors were active, has been fixed.
.SH "April 30, 2006 \- RELEASE 5.06.05\-8"
.rs
.SH "Preliminary Support For Newport NSC200 Motor Controllers"
.sp
Preliminary support for the Newport NSC200 motor controller
is included with this \fBspec\fP release.
.SH "April 26, 2006 \- RELEASE 5.06.05\-7"
.rs
.SH "New Option To Set Stop Bits For Generic Serial Devices"
.sp
A new
\fBser_par()\fP
option
\fB"stop_bits"\fP
can be used to set the number of stop bits for generic serial devices.
The default value of one works for almost all serial devices.
A value of two can be set when needed.
See the
\fI\%serial\fP help file for details.
.SH "New Option To Test For Motor Limits"
.sp
New
\fBmotor_par()\fP
options
\fB"high_lim_hit"\fP
and
\fB"low_lim_hit"\fP
return nonzero if the associated motor limit is active
(for most supported motor controllers).
.SH "Further Update for OMS VME MAXv Support"
.sp
Problems with the support code for
the OMS MAXv motor controller that weren\(aqt fixed in
release 5.06.05\-4 have now been fixed
with the help of OMS support engineers.
.SH "April 21, 2006 \- RELEASE 5.06.05\-6"
.rs
.SH "New \fBsixc\fP Mode"
.sp
A new
\fBchi\fP\-fixed,
\fBphi\fP\-fixed,
\fBmu\fP\-fixed
mode is available with the standard
\fBsixc\fP
geometry.
.SH "April 12, 2006 \- RELEASE 5.06.05\-5"
.rs
.SH "Fixes For Compumotor 6K With Encoders and With Servos"
.sp
The \fBspec\fP support for the Compumotor 6K motor controller now uses relative
moves (rather than absolute moves) if the axis is configured for an encoder.
Also, when starting up, the initial configuration commands now work
correctly if servo motors are configured, avoiding unnecessary
\fBAXSDEF\fP
calls, which could lead to lost positions.
.SH "Update For ESRF TACO LeCroy 1151 Counter Support"
.sp
The \fBspec\fP support for the LeCroy 1151 counters via the ESRF TACO
facility now allows more than one such counter module to be configured.
.SH "April 2, 2006 \- RELEASE 5.06.05\-4"
.rs
.SH "Update For OMS VME MAXv Support"
.sp
The code for the Oregon Micro Systems VME model MAXv controller has
been modified to be a bit more robust in the face of
communication errors.
.SH "March 22, 2006 \- RELEASE 5.06.05\-3"
.rs
.SH "Longer Count Times Implemented For NI 660x Cards"
.sp
The code for the National Instruments 6601/6602 PCI counter/timer card
will now automatically select the slower time base
when necessary to allow for longer counter times, now up to nearly 12 hours.
.SH "March 22, 2006 \- RELEASE 5.06.05\-2"
.rs
.SH "Fix For Amptek PX4 Attenuation"
.sp
The recently added support for the
Amptek PX4 MCA should have set a bit in the
configuration buffer but didn\(aqt, which resulted in the input signal being
attenuated by fifty percent.
The bit is now set.
.SH "March 8, 2006 \- RELEASE 5.06.05\-1"
.rs
.SH "Fix For Comment Parsing On Macro Invocation Line"
.sp
Since the earliest versions of \fBspec\fP (ca. 1986), the
\fB$#\fP
and
\fB$*\fP
symbols in ordinary macro definitions (replaced by the number
of arguments and all the arguments, respectively) have always
inappropriately included
any
\fB#\fP
prefixed comments on the invocation line.
Consider the macro definition
.RS 3m
.sp
.nf
.ft CB
1.SPEC> def test \(aq{print $#, " $* ", $*}\(aq
.ft P
.fi
.RE
.sp
Prior behavior was:
.RS 3m
.sp
.nf
.ft CB
2.SPEC> test 1 2 3 # 4 5 6
7  1 2 3 # 4 5 6  123
.ft P
.fi
.RE
.sp
(Since the second
\fB$*\fP
isn\(aqt in quotes, the comment is effective after the argument substitution.)
New behavior is:
.RS 3m
.sp
.nf
.ft CB
2.SPEC> test 1 2 3 # 4 5 6
3  1 2 3  123
.ft P
.fi
.RE
.sp
Not sure why this problem went unnoticed and unfixed all this time.
.SH "Fix For ESRF VCT6 Timer Polling"
.sp
The polling of the counting/busy status for the
ESRF VCT6 timer now also checks for the status bit that indicates
the unit is preparing to start counting.
Previously, not checking this bit wasn\(aqt a problem,
but with faster computers,
\fBspec\fP\(aqs polling for busy status can occur before counting has
actually started.
.SH "Fix For Amptek PX4 Parameter Display"
.sp
A bug in the new code for the Amptek PX4 where an incorrect
high\-voltage setting was displayed with the
\fBmca_par("pars")\fP
command has been fixed.
.SH "Fix For Kinetic Systems 3388"
.sp
A bug introduced with implementation of support for multiple CAMAC
crates in release 5.06.02\-1 that broke support for the Kinetic Systems 3388
CAMAC\-to\-GPIB controller has been fixed.
In addition, the KS 3388 can now be used in other than crate zero, and
more than one KS 3388 can be used at a time.
.SH "February 22, 2006 \- RELEASE 5.06.04\-12"
.rs
.SH "Support For Amptek PX4 MCA"
.sp
\fBspec\fP now supports the Amptek PX4 Digital Processor MCA over both
USB (on Linux and Mac OS X) and serial interfaces.
See the new
\fI\%px4\fP help file for details.
.SH "February 21, 2006 \- RELEASE 5.06.04\-11"
.rs
.SH "Recent \fBlibedit\fP Problem With \fB^C\fP Handling Fixed"
.sp
Some obscure
problems with signal handling when linking \fBspec\fP with the optional
\fBlibedit\fP
library version included with \fBspec\fP releases since 5.06.03
have been fixed.
.SH "February 16, 2006 \- RELEASE 5.06.04\-10"
.rs
.SH "USB Support Under Mac OS X"
.sp
The USB support in \fBspec\fP is now available on Mac OS X platforms in
addition to Linux.
To enable the USB support on the Mac OS X platform, \fBspec\fP
must be linked with the
\fBlibusb\fP
library, available at
\fI\%libusb.sourceforge.net\fP .
.SH "February 9, 2006 \- RELEASE 5.06.04\-9"
.rs
.SH "Support For Physik Instrumente C\-630 Motor Controller"
.sp
\fBspec\fP now supports the Physik Instrumente model C\-630 (Apollo)
motor controller.
This controller uses a serial interface.
.SH "Fix For \fBspec\fP Client\(aqs Server Lookup"
.sp
A bug in the \fBspec\fP client server\-lookup algorithm has been fixed.
Previously, if a \fBspec\fP client connected to multiple \fBspec\fP servers
on the same host using
port numbers for some (such as
\fB"localhost:7000"\fP)
and \fBspec\fP process names for others (such as
\fB"localhost:fourc"\fP),
the code would sometimes direct commands to the wrong server.
The bug was probably associated with the updates to the
lookup algorithm in \fBspec\fP release 5.06.03\-1.
.SH "Fix For Unconfigured Optional Motor Parameters"
.sp
The new
\fBmotor_par()\fP
features introduced in release 5.06.04\-1 broke old behavior that
allowed setting values for optional motor parameters that were not
explicitly assigned values in the
\fBconfig\fP
file.
With the new features,
motor parameters not in the
\fBconfig\fP
file can be created (to exist only in the current
\fBspec\fP session) using the
new
\fBmotor_par()\fP
\fB"add"\fP
option.
This \fBspec\fP release will restore compatibility with past releases
by doing an automatic
\fB"add"\fP
of any of the standard optional motor
parameters not otherwise assigned values in the
\fBconfig\fP
file when values are set with
\fBmotor_par()\fP.
.SH "Fix For Synchronizing Motor Positions"
.sp
A bug in the implementation of the new
\fBmotor_par()\fP
features in release 5.06.04\-1 that could cause problems with
synchronizing motor positions in some situations has been fixed.
.SH "February 2, 2006 \- RELEASE 5.06.04\-8"
.rs
.SH "New \fBprefix_ADDR\fP Variable For Macro Hardware Functions"
.sp
The string value of the controller
\fBADDR\fP
parameter for macro hardware controllers, as set on the
\fBD\fPevices
screen of the
\fBedconf\fP
hardware configuration editor, is now available in the
associated macro
functions as a
\fBlocal\fP
variable with the name
\fBprefix_ADDR\fP.
See the
\fI\%mac_hdw\fP help file for details.
.SH "Fix For Compumotor 6K With Negative Step Size"
.sp
The \fBspec\fP code that supports the Compumotor 6K motor controllers
will no longer supply a negative argument to the
\fBDRES\fP
command, as was the previous behavior when \fBspec\fP\(aqs
steps\-per\-degree motor parameter was negative.
(The 6K doesn\(aqt accept negative values for that parameter.)
.SH "Fix For Broken \fBspec\fP Server Motor Initialization"
.sp
A bug in the implementation of the new
\fBmotor_par()\fP
features introduced in release 5.06.04\-1, which prevented \fBspec\fP clients
from connecting to \fBspec\fP server motors that didn\(aqt have a configured
encoder step\-size parameter, has been fixed.
.SH "Fix For Server/Client Associative Array\-Element Transfers"
.sp
A coding bug in release 5.06.04\-5,
where \fBspec\fP server/client
transfers for single elements of associative arrays using
\fBprop_get()\fP
and
\fBprop_put()\fP
were broken, has been fixed.
.SH "January 24, 2006 \- RELEASE 5.06.04\-7"
.rs
.SH "New \fBuser_scan_plot\fP Hook In Standard Macros"
.sp
The standard
\fBscan_plot\fP
macro, called for each point of a scan, now includes a call of
\fBuser_scan_plot\fP,
which local users can define to perform special actions before the
standard
\fB_plot\fP
(normally defined as
\fBrplot\fP)
macro is called.
By default,
\fBuser_scan_plot\fP
is defined
as an empty macro
using
\fBcdef()\fP.
.SH "Fix For TACO Serial Interface"
.sp
A bug, where the TACO device\-server timeout was not set correctly
for baud rates of 38400 and above, has been fixed.
.SH "Bug Fix For Out\-Of\-Bounds Array Access"
.sp
A bug,
where assignment of a value to
a data\-array element indexed beyond its dimensioned size could
cause a segmentation fault on Solaris platforms, has been fixed.
.SH "January 23, 2006 \- RELEASE 5.06.04\-6"
.rs
.SH "Fix For TACO and EPICS Serial Interface"
.sp
A bug, which would cause problems
only with the
Galil Optima,
IMS MDrive
and New Focus 8753 motor controllers and only
when used with the TACO or EPICS
serial\-line interface, has been fixed.
.SH "January 19, 2006 \- RELEASE 5.06.04\-5"
.rs
.SH "\fBsyms \-v\fP Now Escapes Embedded Double Quotes"
.sp
The built\-in command
\fBsyms\fP
has a
\fB\-v\fP
option to list
symbols and values in a format that can be
used as input to \fBspec\fP.
Previously, symbol values with embedded
double\-quote characters
(\fB"\fP)
were not escaped with a backslash, thus making the
\fBsyms\fP
output not suitable as further input.
That problem is fixed.
Previous behavior was as follows:
.RS 3m
.sp
.nf
.ft CB
1.FOURC> x[0]="a \e"string\e""

2.FOURC> syms \-v x

x["0"] = "a "string""
.ft P
.fi
.RE
.sp
New behavior is:
.RS 3m
.sp
.nf
.ft CB
2.FOURC> syms \-v x

x["0"] = "a \e"string\e""
.ft P
.fi
.RE
.SH "Bug Fix To Allow Macro Functions To Return Arrays"
.sp
A bug, which prevented certain associative array representations from
being used as return values from macro functions, has been fixed.
An example of what didn\(aqt work before is
.RS 3m
.sp
.nf
.ft CB
def foo2() \(aq{
        local x[]
        x[0]="test"
        return(x)
}\(aq
.ft P
.fi
.RE
.SH "Associative Array Elements Keep String Value In Server/Client Calls"
.sp
String\-valued associative array elements that represent numbers
(of the form
\fB"1e6"\fP
or
\fB"0x123"\fP,
for example)
will now maintain the string representation when passed to and from \fBspec\fP
server and clients using the server/client protocol.
(See the
\fI\%server\fP help file for details on passing associative arrays.)
.SH "Associative Array Initialization Keeps String Value"
.sp
Associative array initialization of the form
.RS 3m
.sp
.nf
.ft CB
x = [ 0 : "1e6" , 1 : "0x123" ]
.ft P
.fi
.RE
.sp
will now maintain the string representation of the array elements.
Previously, values were converted to numbers.
.SH "December 16, 2005 \- RELEASE 5.06.04\-4"
.rs
.SH "New \fBmotor_par()\fP Option for Macro Motors"
.sp
The new read\-only parameter
\fB"chan0"\fP
returns the motor number of the motor associated with channel zero of the
unit and module of the specified motor.
This feature allows for simplified implementation of general\-purpose
calculational
pseudomotors.
.SH "New Configuration Parameter Available for Macro Hardware"
.sp
The configuration editor now allows entry of an arbitrary string
in the
\fBADDR\fP
field for macro motors and counters.
The contents of this field can be retrieved with the
\fBmotor_par()\fP
and
\fBcounter_par()\fP
option
\fB"address"\fP.
All macro\-hardware
motor and counter channels associated with the controller will
return the parameter.
.SH "Fix For Recently Broken \fBcounter_par()\fP"
.sp
A coding bug in release 5.06.04\-1 that broke
\fBcounter_par()\fP
for device\-dependent parameters has been fixed.
.SH "Update For \fBtimescan\fP, \fBloopscan\fP Macros"
.sp
The
\fB_timescan\fP
macro used by both
\fBtimescan\fP
and
\fBloopscan\fP
has been modified to take into account the duration of the
optional sleep times
when calculating the range of the
\fBx\fP\-axis
for plotting.
.SH "December 14, 2005 \- RELEASE 5.06.04\-3"
.rs
.SH "String\-Valued Mnemonics Now Work With \fBmotor_par()\fP and \fBcounter_par()\fP"
.sp
Previously, the
\fBmotor_par()\fP
and
\fBcounter_par()\fP
functions
only accepted number\-valued symbols as the first argument.
Now, string\-valued symbols containing the string representing the
motor mnemonic are recognized.
That is, the following syntax will now work as expected:
.RS 3m
.sp
.nf
.ft CB
{
   local s
   s = "chi"
   p motor_par(s, "step_size")
}
.ft P
.fi
.RE
.SH "Another Bug Fix For Recent \fBmotor_par()\fP Changes"
.sp
Another bug associated with recent changes for the
\fBmotor_par()\fP
function, which would result in a segmentation fault only in server mode
and only with string\-valued optional motor parameters in the
\fBconfig\fP
file,
has been fixed.
.SH "Update for ESRF DC Motor Device Server Support"
.sp
The previous limit of four motors per controller for
the ESRF (TACO) DC Motor device server has been removed.
.SH "Fixes For Negative Step Size For Several Motor Controllers"
.sp
Possible problems when using a negative step size with the Newport
ESP300, the Newport 4000 series and the Compumotor SX motor controllers
have been addressed.
.SH "December 7, 2005 \- RELEASE 5.06.04\-2"
.rs
.SH "Bug Fix For Recent \fBmotor_par()\fP Changes"
.sp
A programming bug associated with changes in the previous \fBspec\fP release
that could cause a segmentation fault and could prevent
the setting of a number of optional motor parameters
has been fixed.
.SH "Fix For PSD\-50M Number Of Channels"
.sp
An oversight in the original code for the MBraun PSD\-50M MCA, where the
number of channels could not be changed from the default 1024, has
been fixed.
The
\fB"npts"\fP
option to
\fBmca_par()\fP
can now be used to set or retrieve the number of channels.
Note, the number of channels is only relevant to data read out and the
clear command.
.SH "November 28, 2005 \- RELEASE 5.06.04\-1"
.rs
.SH "New Motor Parameter and Counter Parameter Features"
.sp
Site\-defined motor and counter parameters may now be included in the
\fBconfig\fP
file.
These parameters will be accessible in \fBspec\fP via the standard
\fBmotor_par()\fP
and
\fBcounter_par()\fP
functions.
Currently, the configuration editor
\fBedconf\fP
will read and save the parameters, but
the parameters are not viewable
or editable with
\fBedconf\fP.
Thus the parameters must be added manually.
.sp
In addition, arbitrary, temporary
run\-time motor and counter parameters may be created
using
.sp
.RS 4m
\fBmotor_par(mne,  s,  v, "add")\fP
.RE
.sp
where
\fBs\fP
is the parameter name and
\fBv\fP
is the initial parameter value.
The same syntax works for
\fBcounter_par()\fP.
These temporary parameters disappear when
\fBspec\fP exits and after a
\fBreconfig\fP
command.
This feature might be useful
with calculational macro pseudomotors (see
the
\fI\%mac_hdw\fP help file).
.SH "New \fB\(dqtimeout\(dq\fP Parameter For \fBdata_pipe()\fP"
.sp
By default, calls to the user code embedded in the
\fBdata_pipe()\fP
functions are expected to return within one second.
This release includes a configurable time\-out parameter to accommodate
special user needs.
The command
.sp
.RS 4m
\fBdata_pipe("timeout", sec)\fP
.RE
.sp
changes the timeout to
\fBsec\fP
seconds for all subsequent newly created
\fBdata_pipe()\fP
processes.
The command
.sp
.RS 4m
\fBdata_pipe(program, "timeout",  sec)\fP
.RE
.sp
changes the timeout to
\fBsec\fP
seconds just for the named
data\-pipe process.
For both calls, if the
\fBsec\fP
argument is missing, the current timeout is returned.
.SH "Enhanced Sectors Scheme For \fBpsic\fP Geometry"
.sp
The sector transformations for the
\fBpsic\fP
geometry have been rewritten to perform an exhaustive search of
possible angle transformations.
The new search algorithm
makes additional angle settings
available, usually
in situations where one or more of the diffractometer angles are at
special positions, such as multiples of
\fBpi\fP
over 2.
In addition, transformations that violate motor limits are
eliminated in the preference ranking schemes.
See the
\fI\%psic\fP help file for details.
.SH "New Theta\-Fixed Mode For \fBzaxis\fP"
.sp
A new theta\-fixed
mode for use near
\fB00L\fP
scattering vectors is implemented for the
\fBzaxis\fP
geometry.
See the
\fBgeo_zaxis.c\fP
file
included in the \fBspec\fP distribution
for implementation details.
.SH "Fix For Theta\-Fixed Mode In \fBfourc\fP"
.sp
A bug in the recently introduced theta\-fixed mode for the
\fBfourc\fP
geometry has been fixed.
.SH "New \fB\(dqinitialize\(dq\fP Option For XIA DXP Devices"
.sp
A new
\fB"initialize"\fP
\fBmca_par()\fP
option is available for the XIA DXP devices.
This option will reload the firmware
and execute all the initialization functions associated with
startup and the
\fBreconfig\fP
command.
.SH "Fix For XIA DXP Devices"
.sp
Users have reported from time to time that the XIA DXP libraries
return the error
\fB"must stop run before beginning a new run"\fP.
To avoid this message and resulting error, \fBspec\fP now always calls the
\fBdxp_stop_run()\fP
DXP library function before calling the
\fBdxp_start_run()\fP
function.
.SH "More Updates For Struck SIS 3820 Scalers"
.sp
Another new
\fBcounter_par()\fP
option,
\fB"test_pulse_mask"\fP,
is implemented for the Struck SIS 3820 scalers.
The value of the argument is used
to program register 0x218 (part of Struck\(aqs firmware
release 1.0A).
This register allows the 25 MHz internal test
pulse train to be routed to any channel.
If a nonzero value is written to this register, \fBspec\fP will enable
counter test mode and the 25 MHz test pulses in the operation register
(register 0x000) during counting.
It is then necessary to mask the channels that are to count external
signals using the mask written with this command.
Note, \fBspec\fP will always mask channel 0 on the master unit, as \fBspec\fP uses
that channel to measure elapsed time based on the 50 MHz internal signal.
.SH "Initial Support For ESRF MUSST As MCA"
.sp
The Multipurpose Unit for Synchronization, Sequencing and Triggering
(MUSST) from the the ESRF Control Electronics group is now supported
as an MCA device in \fBspec\fP.
The interface is GPIB.
.SH "Update For ESRF/TACO Serial Device Server"
.sp
Previously,
\fB^C\fP
aborts would turn off reading from the ESRF/TACO serial device server,
thus preventing macro\-hardware implementation of calls such as
\fB"abort_one"\fP
from working.
That problem has been fixed.
(Similar behavior for the standard serial support and the EPICS serial
support was corrected in \fBspec\fP release 5.02.03.)
.SH "Macro\-Function Argument Precision Increased"
.sp
All number values passed to macro\-hardware macro functions
are now sent with nine\-digit precision.
Previously, six\-digit precision was used for most calls.
.SH "Macro\-Function \fBcounter_par()\fP Support Enhanced"
.sp
The macro\-hardware counter macro functions now fully support the
\fBcounter_par()\fP
facility.
.SH "November 2, 2005 \- RELEASE 5.06.03\-11"
.rs
.SH "Nonfatal Bug In MVP\-2001 Support"
.sp
A bug in the support for the MicroMo MVP\-2001 (present since the code
was created for \fBspec\fP release 5.05.01\-3),
where spurious error messages of the sort
\fB"serial device X isn\(aqt configured"\fP
could be displayed during device configuration, has been fixed.
.SH "October 27, 2005 \- RELEASE 5.06.03\-10"
.rs
.SH "New \fBreconnect\fP Option For \fBesrf_io()\fP"
.sp
A new
\fB"reconnect"\fP
option is available with the
\fBesrf_io()\fP
function.
The option is also available directly
for the ESRF/TACO camera devices via
\fBimage_par()\fP.
Such an option allows remaking the connection without the disruption
caused by the complete hardware reinitialization associated with
\fBreconfig\fP.
The command closes the connection to the device via the
\fBdev_free()\fP
TACO function
and reopens the connection to the same device using the
same timeout and UDP/TCP protocol via
\fBdev_import()\fP.
.SH "New Theta\-Fixed Mode For \fBfourc\fP"
.sp
A new theta\-fixed mode is available with the four\-circle
geometry code.
Currently, though, the sectors transformations are not
implemented for this mode.
Only sector 0 is available.
.SH "Server/Client \fBspec\fP Motor Version Incompatibility Fixed"
.sp
A problem where \fBspec\fP clients from releases 5.06.02\-2 through 5.06.03\-9
are not compatible with \fBspec\fP motor servers from prior releases
has been addressed with this release.
Clients in the above range did work with \fBspec\fP motor servers in the same
range and will now work with servers from this and later releases.
Clients from this release onward will work with all previous
\fBspec\fP motor server releases.
.SH "\fBdebug\fP Macro Fix"
.sp
A syntax error introduced in the
\fBdebug\fP
macro in release 5.06.03\-8 has been fixed.
.SH "Mclennan Motor Fix"
.sp
A programming error introduced in the code that
supports the Mclennan PM301/381, PM600 and PM608 motor controllers
in release 5.06.03\-2
that would produce a segmentation fault when an attempt was made to
move a motor associated with one of the above controllers
has been fixed
.SH "October 17, 2005 \- RELEASE 5.06.03\-9"
.rs
.SH "Updates For Struck SIS3820 Scalers"
.sp
New
\fBcounter_par()\fP
options
\fB"invert_inputs"\fP,
\fB"invert_outputs"\fP,
\fB"input_mode"\fP
and
\fB"veto_inhibits"\fP
are available to allow additional flexibility in configuring the Struck
SIS3820 VME Scaler module.
If passed with nonzero arguments, the
\fB"invert_inputs"\fP
and
\fB"invert_outputs"\fP
will have corresponding bits set in the module\(aqs
operation\-mode register
when the device is programmed for counting.
The
\fB"input_mode"\fP
option can be set to values from 0 through 6 to override the default
input mode 2.
A value can be passed using the
\fB"veto_inhibits"\fP
option that will be written to register 0x214 of the module (only available
with firmware 1.9 and greater).
Currently, options are reset to default values after every start up and
\fBreconfig\fP.
.SH "October 17, 2005 \- RELEASE 5.06.03\-8"
.rs
.SH "The \fB\(dqdisable\(dq motor_par()\fP Option Now Passed To Macro Motors"
.sp
The
\fB_par()\fP
function for macro motors will now be called when the
\fB"disable"\fP
option to
\fBmotor_par()\fP
is called to change the
disabled status of a motor.
See the
\fI\%mac_hdw\fP help file for details.
.SH "String\-Valued Generic Motor Parameters Passed to Macro Motors"
.sp
Previously, if the value of
a generic motor parameter (one named
\fBmisc_par_N\fP
were
\fBN\fP
is from 1 to 6), was set to a string, the string value was not passed to the
\fB_par()\fP
function of an associated macro motor.
That problem has been fixed.
.SH "Support For Tsuji PM4C\-05A Motor Controller"
.sp
\fBspec\fP now supports the Tsuji model PM4C\-05A motor controllers.
The controller can be used with \fBspec\fP over
GPIB or serial interfaces.
The controller is selected as
\fBTSUJI4C\fP
on the
\fBM\fPotor
screen of the configuration editor.
The optional
\fB"misc_par_1"\fP
motor parameter, if set, will enable the controller\(aqs
hold\-off mode for the associated axis.
.SH "Support For New Focus 8751 Closed\-Loop Picomotors"
.sp
The support for the New Focus 87XX Picomotor Controller has been extended
to include support for the 8751 closed\-loop controllers.
Such support requires New Focus firmware version 1.5.4 or higher in the
model 8752 ethernet controller.
\fBspec\fP will automatically detect the presence of the closed\-loop controllers.
.SH "New Debugging Level For Server\-Client Socket I/O"
.sp
The new debugging bit 0x800000 will print only the socket I/O transactions
associated with \fBspec\fP server and client communications.
That output will no longer be displayed with debugging bit 0x40 (64).
.SH "October 3, 2005 \- RELEASE 5.06.03\-7"
.rs
.SH "New Option To \fBremote_stat()\fP"
.sp
If a second argument of
\fB"?"\fP
is used with the
\fBremote_stat()\fP
function on a \fBspec\fP client,
the return value is a string indicating the status of the
connection specified by the first argument.
Possible return strings are
\fB"up"\fP,
\fB"trying"\fP,
\fB"lost"\fP
and
\fB"no connection"\fP.
See the
\fI\%server\fP help file for details.
.SH "New Tracking Option For X19C \fBsurf\fP Geometry"
.sp
The X19C variation of the
\fBsurf\fP
geometry now includes an option to turn off sample height and
detector height tracking with the incident angle motions.
This is the same option that has been available with the X22B and CMC
\fBsurf\fP
variations.
Tracking is generally turned off to speed alignment of the motors
associated with the incident angle.
The
\fBsettrack\fP
macro can be used to turn tracking on or off.
By default, tracking is on.
.SH "Bug In Handling of \fBSV_ABORT\fP Fixed"
.sp
Deficiencies in the original implementation of the handling of
\fBSV_ABORT\fP
protocol command (which is intended to mimic a
\fB^C\fP
action from the keyboard)
by a \fBspec\fP server have been addressed.
Previously, reception of an
\fBSV_ABORT\fP
packet could cause
the server to become stuck in a loop on reads of the input
socket stream and/or to fail to carry out the abort actions on
subsequent
\fBSV_ABORT\fP
packets.
.SH "Recently Introduced \fBspec\fP Client Bugs Fixed"
.sp
The release 5.06.03\-1 update that was intended to
allow servers to be interchangeably specified by port number or \fBspec\fP
version name had problems that could cause a \fBspec\fP client to crash or not
properly recognize an existing connection.
Those problems have been fixed.
.SH "September 19, 2005 \- RELEASE 5.06.03\-6"
.rs
.SH "Bug Fix For Compumotor 6K"
.sp
A programming bug that could cause bad positions to be reported for
the Compumotor 6K motor controller has been fixed.
.SH "September 17, 2005 \- RELEASE 5.06.03\-5"
.rs
.SH "Fix For XIA X10P Support"
.sp
The changes in release 5.06.02\-1 to add support for multiple CAMAC crates
inadvertently broke the support for XIA X10P parallel port MCA device.
That problem has been fixed.
(Note, the X10P support in \fBspec\fP
does work with the Radiant Vortex X\-ray
detector.)
.SH "September 13, 2005 \- RELEASE 5.06.03\-4"
.rs
.SH "Fix For Compumotor 6K Encoder Support"
.sp
\fBspec\fP now sends the
\fBENCCNT\fP
command to the Compumotor 6K motor controllers, which is needed to enable
encoder position read back.
\fBspec\fP now also properly uses the configured encoder step\-size parameter
to determine the user angle associated with the encoder position.
.SH "August 20, 2005 \- RELEASE 5.06.03\-3"
.rs
.SH "Fix For FAST ComTec MCDLAP ISA Board MCA Support"
.sp
A bug in the recently introduced support for the FAST ComTec
MCDLAP that prevent the
\fB"soft_preset"\fP
mode from working has been fixed.
.SH "August 3, 2005 \- RELEASE 5.06.03\-2"
.rs
.SH "Fix For Compumotor 6K Support"
.sp
A problem that prevented \fBspec\fP from recognizing certain
eight\-motor Compumotor 6K controller configurations has been fixed.
.SH "August 3, 2005 \- RELEASE 5.06.03\-1"
.rs
.SH "Updated For GCC Release 4"
.sp
The \fBspec\fP code has been updated to compile cleanly with gcc 4.x, as
used with Fedora Core 4 Linux, Mac OS 10.4, etc.
.SH "Pseudocounters Now Ignore Scale Factor"
.sp
For pseudocounters
(those counters with controller type
\fBNONE\fP
in the
\fBconfig\fP
file), \fBspec\fP shouldn\(aqt change the value assigned to the corresponding
element of the
\fBS[]\fP
scaler array.
However, in prior releases, \fBspec\fP would divide the value in
\fBS[]\fP
by the
\fBconfig\fP\-file
scale factor on every call of
\fBgetcounts\fP.
Since the scale factor is normally set to one, this was seldom an issue.
In any case, with this release, \fBspec\fP will ignore the scale factor
for pseudocounters.
The configured scale factor can be retrieved, though, via
the
\fB"scale"\fP
option to
\fBcounter_par()\fP.
.SH "Two Issues With the \fBspec\fP Client Addressed"
.sp
Previously, if a \fBspec\fP client configured to use \fBspec\fP server hardware
was started before the server was started, and if a
user\-level call, such as
\fBremote_cmd()\fP,
was also issued before the server started,
when the server finally did come up, the client would not
connect to the server for the configured hardware.
That problem has been fixed.
.sp
Also previously, if a server was specified by both a symbolic name,
such as
\fBhost:fourc\fP,
and a port number, such as
\fBhost:6510\fP,
\fBspec\fP would attempt to create two connections,
even if the first was
using the same port number as the second.
The two connections were problematic in some situations.
Now the \fBspec\fP client will check if the two specifications
refer to the same server and use the same connection when appropriate.
.SH "Support For FAST ComTec MCDLAP ISA Board MCA"
.sp
Initial support for
the FAST ComTec MCDLAP ISA Board MCA is now included with \fBspec\fP.
.SH "Fix For Mclennan Motor Controllers"
.sp
Previously, errors were sometimes generated when changing base and
slew rates on
a multiplexed Mclennan motor channel on a Model 381 or 608 controller if
the new base rate was higher than the old slew rate.
\fBspec\fP now makes sure the slew rate is reprogrammed first,
when necessary.
.SH "Fix For IMS Motor Controllers"
.sp
A problem, where a failed serial communication link to an IMS
motor controller could lead to endless looping in \fBspec\fP, has been
addressed.
.SH "July 15, 2005 \- RELEASE 5.06.02\-9"
.rs
.SH "Support For Scientific Solutions GPIB Controllers Updated"
.sp
The Scientific Solutions IEEE\-488\-CL/PCI GPIB controller is now
supported by \fBspec\fP on
Linux.
The support is entirely built into the \fBspec\fP code and no kernel
driver is required.
The support shares code with the register\-compatible ISA GPIB
controllers from Scientific Solutions (formerly Tecmar).
Also, the code has also been updated to allow multiple boards of this
type (both ISA and PCI) to be used with \fBspec\fP simultaneously.
In addition, the timing in the polling loops of the code has been
improved.
.SH "Support For Scientific Solutions Labmaster PCI Timer/Counter"
.sp
The Scientific Solutions Labmaster DPCI with Am9513\-based timer/counter
functionality is now supported by \fBspec\fP.
.SH "Update For Am9513\-Type Counter/Timers"
.sp
A number of updates have been made to the Am9513 code.
Multiple PC cards with Am9513 chips may now be used.
An improved gating system is implemented, although it requires adding an
additional jumper between two connector pins.
However, boards without the jumper will still
work.
See the
\fI\%am9513\fP help file for details.
.SH "Fix For Hecus ASA\-32 MCA Card"
.sp
Missing code in the Hecus ASA\-32 MCA card support needed to set the
time preset when the MCA
\fB"soft_preset"\fP
mode is active has been put in place.
.SH "Fix For \fBnewfile\fP Macro"
.sp
An old bug in the
\fBnewfile\fP
macro where a typo in a variable name resulted in a harmless but
unintended reset of the
\fBEPOCH\fP
variable when an existing file was reused, has been fixed.
.SH "June 12, 2005 \- RELEASE 5.06.02\-8"
.rs
.SH "Fixes For Unit Number Assignment"
.sp
Previously, for a number of motor controller and counter types,
when using more than one controller of the same type,
if the device associated with one of the controllers
couldn\(aqt be opened during
hardware configuration, the
unit numbers assigned
to additional controllers of the same type would be shifted.
Although, this behavior was not normally encountered,
it was annoying to users when it did occur, which usually happened
when \fBspec\fP couldn\(aqt connect to controllers interfaced via
Ethernet.
In this \fBspec\fP release, the code for most of the motor controller types
has been changed to avoid the unit number reassignment.
.SH "Bug Fix For End\-Of\-String For Several Socket\-Interfaced Controllers"
.sp
A bug in the end\-of\-string detection that affected only the Galil,
New Focus model 8752/53 and
Compumotor 6K motor controllers, and only over socket interfaces,
has been fixed.
The bug
could result in communication problems with the controllers,
although only problems with the 6K have so far been reported.
.SH "Accommodate TACO Plus TANGO Install For ESRF"
.sp
The \fBspec\fP installation script
now accommodates linking with both TACO and TANGO
libraries simultaneously, as is now needed in the ESRF
instrument control environment.
.SH "May 22, 2005 \- RELEASE 5.06.02\-7"
.rs
.SH "New zeta Geometry"
.sp
A new four\-motor geometry for a diffractometer located at NSLS beamline
X21 is included.
The geometry is called
\fBzeta\fP.
The geometry motors are called
\fBnu\fP,
\fBzeta\fP,
\fBdelta\fP
and
\fBtheta\fP.
.SH "Support For OMS MAXv Motor Controller"
.sp
This \fBspec\fP release supports the new Oregon Micro Systems
MAXv VME motor controller module.
.SH "Fixes For Compumotor 6K"
.sp
A problem with setting the axis definition on the Compumotor 6K
to stepper or server to reflect the \fBspec\fP hardware configuration file
has been fixed.
Also, an issue where the unit number assignments would change if
configured controllers were unavailable has been addressed.
.SH "May 4, 2005 \- RELEASE 5.06.02\-6"
.rs
.SH "Fix For Optional Motor Parameters With Linked Configurations"
.sp
An old bug, where
for linked configurations, the
\fBMOTPAR\fP
optional parameters
encountered in the
\fBconfig\fP
file for motors not part of the active
geometry were assigned to the last motor that was part of
the active geometry, has been fixed.
.SH "May 2, 2005 \- RELEASE 5.06.02\-5"
.rs
.SH "Fix For DAC Motor Timing"
.sp
Short (< 10 millisecond) sleeps have been added after PCI\- and
ISA\-board DAC motors are set
to allow the DACs time to settle,
apparently required in some configurations when
more than one DAC channel on the same card is to be
\fB"moved"\fP
at the same time.
.SH "Fix For Macro\-Hardware Motor Start Command"
.sp
A bug, where
the first parameter sent with the
\fB"start_one"\fP
key in the call to the macro motor
\fB"_cmd"\fP
macro function
had been inadvertently sent as the final position after
a backlash correction was applied, rather than final position
for the first part of a two\-part move with backlash, has been fixed.
.SH "April 27, 2005 \- RELEASE 5.06.02\-4"
.rs
.SH "Option Added To OMS Multiplexing"
.sp
The multiplexing support for the OMS motor
controller, where a single channel can be used to drive up to
sixteen motors, has a new
\fBmotor_par()\fP
option available.
When set,
the order in which the multiplexed channels are moved will be reversed.
By default,
when more than one motor is commanded to move at the same time,
the motors are moved in the channel number order.
The command
.sp
.RS 4m
\fBmotor_par(mne, "mplex_reverse", 1)\fP
.RE
.sp
will cause the motors to be moved in reverse channel number order, while
.sp
.RS 4m
\fBmotor_par(mne, "mplex_reverse", 0)\fP
.RE
.sp
will restore the default order.
.SH "April 25, 2005 \- RELEASE 5.06.02\-3"
.rs
.SH "Fix For Server\-Mode \fB\(dqstatus/quit\(dq\fP Property"
.sp
A problem, where the server property
\fB"status/quit"\fP
was often not sent to registered clients when the server exited,
has been fixed.
.SH "April 24, 2005 \- RELEASE 5.06.02\-2"
.rs
.SH "Support For Parker/Compumotor 6K Motor Controller"
.sp
This \fBspec\fP release includes support for the Parker/Compumotor
6K motor controller over serial and Ethernet interfaces.
The code includes support for encoders, servo motors and home searches,
although some details of the implementation of these features may require
refinement.
The support for these motor controllers includes a new \fBspec\fP feature
for detecting an emergency stop.
If any of the 6K limit or trigger inputs have been preprogrammed using
the
\fBLIMFNC\fP
or
\fBINFNC\fP
firmware commands for behavior
\fBD\fP
(emergency stop),
\fBspec\fP will check whether the corresponding bit is set before
starting a move and when a move has finished.
In the former case, \fBspec\fP will warn the user that the emergency stop is
active.
In the latter case, \fBspec\fP will print a message that an emergency stop
has occurred.
.SH "New Motor Property"
.sp
A new
\fBemergency stop\fP
motor property has been incorporated into the \fBspec\fP infrastructure.
Currently, the only motor controller which can trigger the property
is the Compumotor 6K.
\fBspec\fP\(aqs behavior on receiving an emergency stop is much the same as
hitting a limit.
However, unlike with an active limit, \fBspec\fP will allow a new move to
be started while the emergency stop is active.
.SH "New \fBkappa\fP Geometry Variation For Crystalogic Diffractometer"
.sp
A new
\fBkappa\fP
geometry variation is included to support
Crystalogic kappa diffractometers where the detector angle is
controlled by an elevator.
The configuration is automatically selected if, in addition to the
standard
\fBfourc\fP
and
\fBkappa\fP
motors, a motor with mnemonic
\fBxlhgt\fP
is included in the
\fBconfig\fP
file.
For such a configuration, the
\fBtth\fP
motor should be configured with controller type
\fBNONE\fP,
as it will be a pseudomotor.
In addition, two geometry parameters,
\fBg_xtalogic_d1\fP
(the vertical distance between the instrument center
and the driven point below the detector table)
and
\fBg_xtalogic_d2\fP
(the horizontal distance between the instrument center
and the detector table
vertical axis)
are included with the standard geometry macro files.
.SH "Further Improvements For Struck SIS 1100/3100 V2 Driver"
.sp
Additional modifications to the
recently updated support for Struck\(aqs version 2.0 Linux driver for
their SIS 1100/3100 PCI\-to\-VME controller
turned out to be needed.
.SH "April 22, 2005 \- RELEASE 5.06.02\-1"
.rs
.SH "Initial Support For Multiple CAMAC Controllers"
.sp
This release of \fBspec\fP allows up to four
CAMAC crate controllers to be used at the same time, however, with a number
of limitations.
(Previously, only one crate controller could be used.)
Currently, except for the Jorway 73A, the KS3929 and the
DSP 6001 controller models,
only one instance of a particular type or model of
a controller can be used at a time.
Also, so far the only
CAMAC modules that can be installed in other than the first crate
(crate 0) are
the XIA DXP\-4C/4C2X MCA,
KS\-3655, KS\-3610, QS\-450, RTC\-018, KS\-3112, KS\-3116, KS\-3195 and E250
modules.
In addition, the user\-level functions
\fBca_get()\fP,
\fBca_put()\fP,
\fBca_fna()\fP
and
\fBca_cntl()\fP
currently only work with the first crate.
The multiple crate support will be extended for
multiple identical
controllers, additional modules and to the user\-level functions
in the future as needed.
.sp
To configure additional controllers from the
\fBedconf\fP
configuration editor (invoked by the
\fBconfig\fP
macro),
use
\fB^F\fP
or
\fB^B\fP
on the CAMAC entry of the
\fBI\fPnterfaces
screen.
To configure modules in the additional crates, type
\fBC\fP
from the CAMAC crate screen to cycle through
the crates associated with each
controller.
For scaler modules installed in other than the first CAMAC crate,
the crate number must be entered in the same field as the unit number
on the
\fBS\fPcaler
screen of the configuration editor using the
crate/unit
notation, as in 1/0 for crate 1, unit 0.
For motor modules installed in other than the first CAMAC crate,
the crate number is entered as [crate/]unit/channel in the
unit/[module/]channel field of the motor screen.
.sp
If only one crate is configured, the
\fBconfig\fP
file syntax is the same as before.
When multiple crates are configured, additional information specifying
crate number for each module and controller is added to the
\fBconfig\fP
file.
.SH "Updated Code For CAMAC DAC Modules"
.sp
The support for the CAMAC KS\-3112, KS\-3116, KS\-3195 and E250
(used as DAC motors) has been rewritten to use the
\fB"new"\fP
(as of 1995) motor formalism.
This change should be invisible for the most part, but does allow
these motors to be accessed via the \fBspec\fP server.
Also, the optional unit/channel configuration feature is now available
for these motor channels.
.SH "Fix For XIA DXP CAMAC Module"
.sp
A bug that prevented the XIA DXP parameters from being modified using the
\fBmca_par()\fP
function where \fBspec\fP incorrectly
indicated the parameter was
\fB"read only"\fP,
has been fixed.
.SH "Improved Memory Mapping For Struck SIS 1100/3100"
.sp
The Struck SIS 1100/3100 PCI\-to\-VME controller on Linux has
room for sixty\-four 4 megabyte memory maps.
Previously, if all were used, an attempt to map a new region would fail.
In this update, \fBspec\fP will now reuse mapping registers in a circular
fashion, thus making it possible to access the entire 4 gigabyte
A32 VME address space.
.SH "Fix For Extra Echo In Piper Mode"
.sp
A recent bug (introduced with the piper mode fix in \fBspec\fP release
5.05.05\-7), that caused commands to be echoed
twice when the file descriptor option to the
\fB\-p\fP
command line option was zero, has been fixed.
.SH "Fix For Start\-up With No \fBconfig\fP File"
.sp
Although there is little reason to start \fBspec\fP with no
\fBconfig\fP
file, a bug which would cause \fBspec\fP to crash in that situation
has been fixed.
.SH "April 13, 2005 \- RELEASE 5.06.01\-8"
.rs
.SH "Fix For Hecus ASA\-32 MCA Card"
.sp
A bug in the support for the Hecus
ASA\-32 MCA ISA card that affected the
clear operation has been
fixed.
.SH "April 4, 2005 \- RELEASE 5.06.01\-7"
.rs
.SH "Update For Struck SIS 1100/3100 V2 Driver"
.sp
Support for the Struck SIS 1100/3100 PCI\-to\-VME controller on
Linux has been updated to work with Struck\(aqs new Version 2 driver.
The new driver supports Linux 2.6 kernels.
When configuring \fBspec\fP to work with the new driver, note the
default device name for the first controller has changed from
\fB/dev/sis1100\fP
to
\fB/dev/sis1100_00remote\fP.
.SH "March 21, 2005 \- RELEASE 5.06.01\-6"
.rs
.SH "Fix For PI E710 Motor Controller"
.sp
An adjustment to the code for the
Physik Instrumente Model E710 Picomotor Controller
has been made to allow it to work with socket\-to\-serial
devices.
.SH "March 10, 2005 \- RELEASE 5.06.01\-5"
.rs
.SH "More Improvements For Micos Motor Controllers"
.sp
The Micos VENUS\-2 compatible motor controllers
on occasion send the same response twice, such that subsequent
commands and responses
become unsynchronized.
\fBspec\fP now examines responses to most commands
to make sure the response contains the
correct number of arguments.
If the number of arguments is incorrect, \fBspec\fP will flush the input buffer
for the Micos controller and send the command again in order to
reestablish synchronized communication.
(This code is considered a work around for a defect in the Micos
firmware.)
.SH "March 9, 2005 \- RELEASE 5.06.01\-4"
.rs
.SH "Enhanced Powder\-Mode Macros"
.sp
The powder\-mode macros will now return the rocked motor to its position
at the start of the scan, taking into account the backlash correction,
if needed.
(See the
\fI\%setpowder\fP help file for more information.)
.SH "Additions To \fBpsic\fP Macros"
.sp
The standard
\fBpsic\fP
geometry macros now include suitable definitions for the
traditional
\fBfourc\fP
macros
\fBan\fP
and
\fBuan\fP,
which move
\fBdel\fP
and
\fBeta\fP;
\fBpl\fP
and
\fBupl\fP,
which move
\fBchi\fP
and
\fBphi\fP;
and
\fBth2th\fP,
which scans
\fBdel\fP
and
\fBeta\fP.
.SH "Fix For MicroMo MVP\-2001 Motor Controller"
.sp
A bug in the support for the MicroMo MVP\-2001 motor controller
that prevented motor channels numbered
ten and above from working has been fixed.
.SH "March 3, 2005 \- RELEASE 5.06.01\-3"
.rs
.SH "Improvements For Micos Motor Controllers"
.sp
This release includes
some new code to address communication synchronization
issues with
the Micos VENUS\-2 compatible motor controllers that have been
observed after
\fB^C\fP
aborts.
.SH "Another Fix For EPICS Motors Powder\-Mode Behavior"
.sp
The renewed attention (see below) to powder\-mode behavior for EPICS motors
revealed that the backlash parameter for the EPICS powder\-mode motor,
set to zero during a powder\-mode scan, did not get restored at the
end of the scan.
Such behavior has always been the case, but is now fixed.
.SH "February 24, 2005 \- RELEASE 5.06.01\-2"
.rs
.SH "Fix For EPICS Motors Powder\-Mode Behavior"
.sp
The recent addition of the new powder\-mode
\fBmotor_par()\fP
parameters in \fBspec\fP release 5.05.05\-1 adversely affected use of powder
mode with EPICS motors.
This release should correct the problem.
.SH "February 16, 2005 \- RELEASE 5.06.01\-1"
.rs
.SH "Fix For \fBspec\fP Exiting On Start Up On Macro Hardware Macro Errors"
.sp
Previously, during the initial hardware configuration for the case of
macro hardware (see the
\fBmac_hdw\fP
help file), errors in the macro functions associated with the hardware
that would normally cause \fBspec\fP to
reset to command level would cause \fBspec\fP to exit.
Now, \fBspec\fP will continue running, although the particular macro function
call that contained the error will exit.

